@(userEntities: List[Entity])(facets: java.util.ArrayList[Object]) 
@main("Sphinx: Connecting Projects to People")("") {
	
<div class="panel panel-default" style="position: absolute; right: 900px; top: 250px">
   <div class="panel-body">
      @for(index <- facets){
      <select class="selectpicker" data-width="135px" id="@index.asInstanceOf[com.mongodb.BasicDBObject].get("fieldName")">
      @defining(index.asInstanceOf[com.mongodb.BasicDBObject].get("fieldName")) { field =>
      <option selected="selected">@field.asInstanceOf[String].capitalize: All</option>
      }
      
      @defining(index.asInstanceOf[com.mongodb.BasicDBObject].get("fieldValues")){ list =>
      	@for(value <- list.asInstanceOf[List[String]]){
      		<option>@value</option>
      	}
      	
      }
      
      </select>
      }
      <br/>
      <button class="btn btn-default" type="button" onclick="facetSearch();">
                        <span class="glyphicon glyphicon-search"></span>
                        </button>
                        <hr/>
                        <button class="btn btn-default" type="button" id="sort_alpha">Sort Alphabetically</button>
                        <button class="btn btn-default" type="button" id="sort_date">Sort By Date Proposed</button> 
   						<button class="btn btn-default" type="button" id="sort_updated">Sort By Most Recent</button> 
   </div>
</div>



<div id="page_container" class="pcontainer">
	<div class="page_navigation"></div>
	<br />
	<div class="info_text"></div>
	<ul class="content" id="entities">
		@for(entity <- userEntities){

		<li>
			<div class="thumbnail">


				<div>
				
					<h3>@entity.getKey()</h3>
					<h3 id="summary">@entity.getSummary()</h3>
					<h4>@entity.getDescription()</h4>
					<label hidden="true" id="proposed">@entity.getCreated()</label>
					<label hidden="true" id="updated">@entity.getUpdated()</label>


					<a class="btn btn-primary btn-sm"
													href="./entity?arg=@entity.getEntityId()&entityType=@entity.getEntityType()">Learn
													more &raquo;</a> <br />
				</div>

			</div>
		</li> }
	</ul>

</div>

<script src="@routes.Assets.at("javascripts/sort.js")" type="text/javascript"></script>
<script type="text/javascript">
	window.onload = function() {
		var alpha_desc = false;
		var proposed_desc = false;
		var recent_desc = false;

		document.getElementById("sort_alpha").onclick = function() {
			sortAlpha(alpha_desc);
			alpha_desc = !alpha_desc;
			return false;
		}

		document.getElementById("sort_date").onclick = function() {
			sortProposed(proposed_desc);
			proposed_desc = !proposed_desc;
			return false;
		}

		document.getElementById("sort_updated").onclick = function() {
			sortUpdated(recent_desc);
			recent_desc = !recent_desc;
			return false;
		}

	}

	$(document).ready(function() {
		$('#page_container').pajinate({
			items_per_page : 15,
			abort_on_small_lists : true
		});
	});

	$('.selectpicker').selectpicker();
</script>
}
